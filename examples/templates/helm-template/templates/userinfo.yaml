{{- if .Values.userInfo.enabled }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.app.name }}-userinfo
  namespace: {{ .Values.namespace.name }}
  labels:
    app: {{ .Values.app.name }}
    demo.redhat.com/userinfo: ""  # Required label for RHDP integration
  annotations:
    argocd.argoproj.io/sync-wave: "3"
data:
  # Basic demo information
  demo_title: {{ .Values.userInfo.data.demo_title | quote }}
  access_instructions: {{ .Values.userInfo.data.access_instructions | quote }}
  {{- if .Values.application.route.enabled }}
  # Auto-generated demo URL
  {{- if .Values.application.route.host }}
  demo_url: "https://{{ .Values.application.route.host }}{{ .Values.application.route.path }}"
  {{- else }}
  demo_url: "https://{{ .Values.app.name }}.{{ .Values.deployer.domain }}{{ .Values.application.route.path }}"
  {{- end }}
  {{- end }}
  # Additional custom data can be added here
  deployment_type: "{{ .Values.fieldContent.deploymentType }}"
  cluster_api: "{{ .Values.deployer.apiUrl }}"
{{- end }}
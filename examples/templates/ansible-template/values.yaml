# Values for Ansible-based field content

# Application metadata
app:
  name: ansible-field-content
  version: "1.0.0"

# Namespace configuration
namespace:
  name: field-content-demo
  create: true

# Ansible Runner subchart configuration
ansible-runner:
  # Enable the ansible runner job
  enabled: true

  # Job configuration
  job:
    name: field-content-ansible-job
    ttlSecondsAfterFinished: 600  # 10 minutes cleanup

  # Ansible execution configuration
  ansible:
    # Repository containing your Ansible playbooks
    repository:
      url: "https://github.com/your-username/your-ansible-playbooks"
      branch: "main"
      # For private repositories:
      # secretName: "git-credentials"

    # Main playbook to execute
    playbook: "site.yml"

    # Additional variables passed to the playbook
    extraVars:
      demo_title: "Ansible Field Content Demo"
      app_name: "{{ .Values.app.name }}"
      demo_namespace: "{{ .Values.namespace.name }}"

    # Python requirements (in addition to defaults)
    requirements:
      - ansible-runner
      - kubernetes
      - openshift
      - PyYAML
      - requests
      - jmespath

    # Ansible collections to install
    collections:
      - kubernetes.core
      - community.general
      - community.crypto

  # Resource configuration for ansible job
  resources:
    requests:
      cpu: "200m"
      memory: "256Mi"
    limits:
      cpu: "1000m"
      memory: "1Gi"

  # Namespace configuration
  namespace:
    name: "{{ .Values.namespace.name }}"
    create: false  # Created by main chart

  # RBAC configuration - add additional rules as needed
  rbac:
    additionalRules:
    # Example: Add operator permissions if your playbook manages operators
    - apiGroups: ["operators.coreos.com"]
      resources: ["subscriptions", "installplans", "operatorgroups"]
      verbs: ["get", "list", "create", "update", "patch", "delete"]
    # Example: Add custom resource permissions
    - apiGroups: ["custom.domain.com"]
      resources: ["*"]
      verbs: ["*"]

  # Output configuration
  output:
    enabled: true
    userInfoLabel: true

# User information to pass back to RHDP
# This will be created as a ConfigMap with demo.redhat.com/userinfo label
# The Ansible playbook can also create additional ConfigMaps
userInfo:
  enabled: true
  data:
    demo_title: "Ansible-Powered Field Content"
    access_instructions: "The Ansible playbook will create and configure your demo environment"
    deployment_approach: "ansible"